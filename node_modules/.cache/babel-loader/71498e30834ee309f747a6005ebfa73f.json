{"remainingRequest":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue","mtime":1662707971799},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\babel.config.js","mtime":1662103635333},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js","mtime":1662108541364},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js","mtime":1662108544456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL2FiY3d1L0Rlc2t0b3AvXHU1QzBGXHU5RUQxL0xlYXJuL0dpdGVlL3NnZ19ob3V0YWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVxQWRkT3JVcGRhdGVBdHRyIH0gZnJvbSAiQC9hcGkvcHJvZHVjdC9hdHRyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBdHRyIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXR0ckxpc3Q6IFtdLAogICAgICBzaG93VGFibGU6IHRydWUsCiAgICAgIGF0dHJOYW1lOiAiIiwKICAgICAgaXNDbGljazogdHJ1ZSwKICAgICAgYXR0clZhbHVlTGlzdDogW10sCiAgICAgIHZhbHVlTGlzdDogewogICAgICAgIHZhbHVlTmFtZTogIiIsCiAgICAgICAgYXR0cklkOiAiIiwKICAgICAgICBmbGFnOiBmYWxzZQogICAgICB9LAogICAgICBjYXRlZ29yeTNJZDogIiIsCiAgICAgIGlkOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICAvLyBpbnB1dOahhuWkseWOu+eEpueCueaXtgogICAgaXNMb29rOiBmdW5jdGlvbiBpc0xvb2soaW5kZXgsIHJvdykgewogICAgICBpZiAocm93LnZhbHVlTmFtZSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoIuWxnuaAp+WAvOS4jeiDveS4uuepuu+8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYXR0clZhbHVlTGlzdC5sZW5ndGgpIHsKICAgICAgICB2YXIgaXNSZXBlYXQgPSB0aGlzLmF0dHJWYWx1ZUxpc3Quc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0gIT09IHJvdykgewogICAgICAgICAgICByZXR1cm4gcm93LnZhbHVlTmFtZSA9PSBpdGVtLnZhbHVlTmFtZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKGlzUmVwZWF0KSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKCLkuI3og73kuI7lt7LmnInlsZ7mgKflgLzph43lpI3vvIEiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJvdy5mbGFnID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDojrflj5bkuInnuqfliIbnsbtJZAogICAgZ2V0Q2F0ZWdvcnkzSWQ6IGZ1bmN0aW9uIGdldENhdGVnb3J5M0lkKHZhbHVlKSB7CiAgICAgIHRoaXMuY2F0ZWdvcnkzSWQgPSB2YWx1ZTsKICAgIH0sCiAgICAvLyDoh6rlrprkuYnkuovku7bnmoTlm57osIMKICAgIGdldEF0dHJMaXN0OiBmdW5jdGlvbiBnZXRBdHRyTGlzdCh2YWx1ZSkgewogICAgICB0aGlzLmF0dHJMaXN0ID0gdmFsdWU7CiAgICB9LAogICAgLy8g5re75Yqg5bGe5oCnCiAgICBhZGRBdHRyOiBmdW5jdGlvbiBhZGRBdHRyKCkgewogICAgICB0aGlzLnNob3dUYWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmlzQ2xpY2sgPSBmYWxzZTsKICAgICAgdGhpcy5hdHRyTmFtZSA9ICIiOwogICAgfSwKICAgIC8vIOa3u+WKoOWxnuaAp+WAvAogICAgYWRkQXR0clZhbHVlOiBmdW5jdGlvbiBhZGRBdHRyVmFsdWUoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWVMaXN0KTsKICAgICAgLy8gdGhpcy52YWx1ZUxpc3QudmFsdWVOYW1lID0gJyc7CiAgICAgIHRoaXMuYXR0clZhbHVlTGlzdC5wdXNoKHsKICAgICAgICB2YWx1ZU5hbWU6ICIiLAogICAgICAgIGF0dHJJZDogdGhpcy52YWx1ZUxpc3QuYXJySWQsCiAgICAgICAgZmxhZzogZmFsc2UKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlQXR0cjogZnVuY3Rpb24gdXBkYXRlQXR0cihyb3cpIHsKICAgICAgdGhpcy5zaG93VGFibGUgPSBmYWxzZTsKICAgICAgdGhpcy5hdHRyTmFtZSA9IHJvdy5hdHRyTmFtZTsKICAgICAgdGhpcy5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy5hdHRyVmFsdWVMaXN0ID0gW107IC8vIHRoaXMuYXR0clZhbHVlTGlzdCA9IHJvdy5hdHRyVmFsdWVMaXN0OwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJvdy5hdHRyVmFsdWVMaXN0KSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBhdHRySWQgPSBpdGVtLmF0dHJJZCwKICAgICAgICAgICAgICB2YWx1ZU5hbWUgPSBpdGVtLnZhbHVlTmFtZTsKICAgICAgICAgIHZhciB2YWx1ZVJvdyA9IHsKICAgICAgICAgICAgYXR0cklkOiBhdHRySWQsCiAgICAgICAgICAgIHZhbHVlTmFtZTogdmFsdWVOYW1lLAogICAgICAgICAgICBmbGFnOiB0cnVlCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5hdHRyVmFsdWVMaXN0LnB1c2godmFsdWVSb3cpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICB0aGlzLnZhbHVlTGlzdC5hdHRySWQgPSByb3cuaWQ7CiAgICB9LAogICAgLy8g5L+d5a2Y5re75Yqg55qE5bGe5oCn5YC8CiAgICBzYXZlQXR0clZhbHVlOiBmdW5jdGlvbiBzYXZlQXR0clZhbHVlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmF0dHJWYWx1ZUxpc3QpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgaWYgKGl0ZW0udmFsdWVOYW1lID09ICIiKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIuWxnuaAp+WAvOS4jeiDveS4uuepuiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQoKICAgICAgdmFyIGJhc2VBdHRySW5mbyA9IHsKICAgICAgICBhdHRyTmFtZTogdGhpcy5hdHRyTmFtZSwKICAgICAgICBhdHRyVmFsdWVMaXN0OiB0aGlzLmF0dHJWYWx1ZUxpc3QsCiAgICAgICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeTNJZCwKICAgICAgICBjYXRlZ29yeUxldmVsOiAzLAogICAgICAgIGlkOiB0aGlzLmlkCiAgICAgIH07CiAgICAgIHJlcUFkZE9yVXBkYXRlQXR0cihiYXNlQXR0ckluZm8pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF90aGlzLmF0dHJWYWx1ZUxpc3QpLAogICAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICAgIGl0ZW0uZmxhZyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLnZhbHVlTGlzdC5hdHRySWQgPSAnJzsKICAgICAgICAgIF90aGlzLnNob3dUYWJsZSA9IHRydWU7CgogICAgICAgICAgX3RoaXMuJHJlZnMuQ2F0ZWdvcnlTZWxlY3QuZ2V0QXR0ckxpc3QoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICAvLyBpc0NsaWNrCiAgICAgIHRoaXMuc2hvd1RhYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5pc0NsaWNrID0gdHJ1ZTsKICAgIH0sCiAgICB0b0VkaXQ6IGZ1bmN0aW9uIHRvRWRpdChpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcm93LmZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kcmVmc1tpbmRleF0uZm9jdXMoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;EACAA,YADA;EAEAC,IAFA,kBAEA;IACA;MACAC,YADA;MAEAC,eAFA;MAGAC,YAHA;MAIAC,aAJA;MAKAC,iBALA;MAMAC;QACAC,aADA;QAEAC,UAFA;QAGAC;MAHA,CANA;MAWAC,eAXA;MAYAC;IAZA;EAcA,CAjBA;EAkBAC,OAlBA,qBAkBA,EAlBA;EAmBAC;IACA;IACAC,MAFA,kBAEAC,KAFA,EAEAC,GAFA,EAEA;MACA;QACA;QACA;MACA;;MACA;QACA;UACA;YACA;UACA;QACA,CAJA;;QAKA;UACA;UACA;QACA;MACA;;MACAA;IACA,CAnBA;IAoBA;IACAC,cArBA,0BAqBAC,KArBA,EAqBA;MACA;IACA,CAvBA;IAwBA;IACAC,WAzBA,uBAyBAD,KAzBA,EAyBA;MACA;IACA,CA3BA;IA4BA;IACAE,OA7BA,qBA6BA;MACA;MACA;MACA;IACA,CAjCA;IAkCA;IACAC,YAnCA,0BAmCA;MACA;MACA;MACA;QACAd,aADA;QAEAC,4BAFA;QAGAC;MAHA;IAKA,CA3CA;IA4CAa,UA5CA,sBA4CAN,GA5CA,EA4CA;MACA;MACA;MACA;MACA,wBAJA,CAKA;;MALA,2CAMAA,iBANA;MAAA;;MAAA;QAMA;UAAA;UACA;UAAA;UACA;YACAR,cADA;YAEAD,oBAFA;YAGAE;UAHA;UAKA;QACA;MAdA;QAAA;MAAA;QAAA;MAAA;;MAeA;IACA,CA5DA;IA6DA;IACAc,aA9DA,2BA8DA;MAAA;;MAAA,4CACA,kBADA;MAAA;;MAAA;QACA;UAAA;;UACA;YACA;YACA;UACA;QACA;MANA;QAAA;MAAA;QAAA;MAAA;;MAOA;QACApB,uBADA;QAEAE,iCAFA;QAGAmB,4BAHA;QAIAC,gBAJA;QAKAd;MALA;MAOAe;QACA;UAAA,4CACA,mBADA;UAAA;;UAAA;YACA;cAAA;cACAC;YACA;UAHA;YAAA;UAAA;YAAA;UAAA;;UAIA;UACA;;UACA;QACA;MACA,CATA;IAUA,CAtFA;IAuFAC,MAvFA,oBAuFA;MACA;MACA;MACA;IACA,CA3FA;IA4FAC,MA5FA,kBA4FAd,KA5FA,EA4FAC,GA5FA,EA4FA;MAAA;;MACAA;MACA;QACA;MACA,CAFA;IAGA;EAjGA;AAnBA","names":["name","data","attrList","showTable","attrName","isClick","attrValueList","valueList","valueName","attrId","flag","category3Id","id","mounted","methods","isLook","index","row","getCategory3Id","value","getAttrList","addAttr","addAttrValue","updateAttr","saveAttrValue","categoryId","categoryLevel","reqAddOrUpdateAttr","item","cancel","toEdit"],"sourceRoot":"src/views/product/Attr","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"margin: 20px 0px\">\r\n      <CategorySelect\r\n        @getAttrList=\"getAttrList\"\r\n        @getCategory3Id=\"getCategory3Id\"\r\n        :isClick.sync=\"isClick\"\r\n        ref=\"CategorySelect\"\r\n      ></CategorySelect>\r\n    </el-card>\r\n    <el-card>\r\n      <div v-show=\"showTable\">\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          @click=\"addAttr\"\r\n          :disabled=\"!category3Id\"\r\n          >添加属性</el-button\r\n        >\r\n        <el-table :data=\"attrList\" style=\"width: 100%\" border>\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性名称\" width=\"200px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"attrValueList\"\r\n            label=\"属性值列表\"\r\n            width=\"width\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-tag\r\n                type=\"success\"\r\n                v-for=\"(item, index) in row.attrValueList\"\r\n                :key=\"item.id\"\r\n                style=\"margin: 0 20px\"\r\n                >{{ item.valueName }}</el-tag\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-edit\"\r\n                size=\"mini\"\r\n                @click=\"updateAttr(row)\"\r\n              ></el-button>\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div v-show=\"!showTable\">\r\n        <div style=\"margin: 20px 0\">\r\n          <span>属性名:</span>\r\n          <el-input\r\n            placeholder=\"请输入属性名\"\r\n            v-model=\"attrName\"\r\n            style=\"width: 350px; margin: 0 20px\"\r\n          ></el-input>\r\n        </div>\r\n        <div style=\"margin: 20px 0\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-plus\"\r\n            @click=\"addAttrValue\"\r\n            style=\"margin: 0 20px 0 0\"\r\n            :disabled=\"!attrName\"\r\n            >添加属性值</el-button\r\n          >\r\n          <el-button @click=\"cancel\">取消</el-button>\r\n        </div>\r\n\r\n        <el-table\r\n          :data=\"attrValueList\"\r\n          style=\"width: 100%; margin: 20px 0\"\r\n          border\r\n        >\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性值名称\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <span v-if=\"row.flag\" @click=\"toEdit($index, row)\">{{\r\n                row.valueName\r\n              }}</span>\r\n              <el-input\r\n                v-model=\"row.valueName\"\r\n                placeholder=\"请输入属性值名称\"\r\n                v-else\r\n                @blur=\"isLook($index, row)\"\r\n                @keyup.native.enter=\"toLook(row)\"\r\n                :ref=\"$index\"\r\n              ></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"saveAttrValue\"\r\n          :disabled=\"!attrValueList.length\"\r\n          >保存</el-button\r\n        >\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqAddOrUpdateAttr } from \"@/api/product/attr\";\r\nexport default {\r\n  name: \"Attr\",\r\n  data() {\r\n    return {\r\n      attrList: [],\r\n      showTable: true,\r\n      attrName: \"\",\r\n      isClick: true,\r\n      attrValueList: [],\r\n      valueList: {\r\n        valueName: \"\",\r\n        attrId: \"\",\r\n        flag: false,\r\n      },\r\n      category3Id: \"\",\r\n      id: \"\",\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    // input框失去焦点时\r\n    isLook(index, row) {\r\n      if (row.valueName == \"\") {\r\n        this.$message(\"属性值不能为空！\");\r\n        return;\r\n      }\r\n      if (this.attrValueList.length) {\r\n        let isRepeat = this.attrValueList.some((item) => {\r\n          if (item !== row) {\r\n            return row.valueName == item.valueName;\r\n          }\r\n        });\r\n        if (isRepeat) {\r\n          this.$message(\"不能与已有属性值重复！\");\r\n          return;\r\n        }\r\n      }\r\n      row.flag = true;\r\n    },\r\n    // 获取三级分类Id\r\n    getCategory3Id(value) {\r\n      this.category3Id = value;\r\n    },\r\n    // 自定义事件的回调\r\n    getAttrList(value) {\r\n      this.attrList = value;\r\n    },\r\n    // 添加属性\r\n    addAttr() {\r\n      this.showTable = false;\r\n      this.isClick = false;\r\n      this.attrName = \"\";\r\n    },\r\n    // 添加属性值\r\n    addAttrValue() {\r\n      // console.log(this.valueList);\r\n      // this.valueList.valueName = '';\r\n      this.attrValueList.push({\r\n        valueName: \"\",\r\n        attrId: this.valueList.arrId,\r\n        flag: false,\r\n      });\r\n    },\r\n    updateAttr(row) {\r\n      this.showTable = false;\r\n      this.attrName = row.attrName;\r\n      this.id = row.id;\r\n      this.attrValueList = [];\r\n      // this.attrValueList = row.attrValueList;\r\n      for (let item of row.attrValueList) {\r\n        let { attrId, valueName } = item;\r\n        let valueRow = {\r\n          attrId,\r\n          valueName,\r\n          flag: true,\r\n        };\r\n        this.attrValueList.push(valueRow);\r\n      }\r\n      this.valueList.attrId = row.id;\r\n    },\r\n    // 保存添加的属性值\r\n    saveAttrValue() {\r\n      for (let item of this.attrValueList) {\r\n        if (item.valueName == \"\") {\r\n          this.$message(\"属性值不能为空\");\r\n          return;\r\n        }\r\n      }\r\n      let baseAttrInfo = {\r\n        attrName: this.attrName,\r\n        attrValueList: this.attrValueList,\r\n        categoryId: this.category3Id,\r\n        categoryLevel: 3,\r\n        id: this.id,\r\n      };\r\n      reqAddOrUpdateAttr(baseAttrInfo).then((res) => {\r\n        if (res.code === 200) {\r\n          for (let item of this.attrValueList) {\r\n            item.flag = true;\r\n          }\r\n          this.valueList.attrId = '';\r\n          this.showTable = true;\r\n          this.$refs.CategorySelect.getAttrList();\r\n        }\r\n      });\r\n    },\r\n    cancel() {\r\n      // isClick\r\n      this.showTable = true;\r\n      this.isClick = true;\r\n    },\r\n    toEdit(index, row) {\r\n      row.flag = false;\r\n      this.$nextTick(() => {\r\n        this.$refs[index].focus();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}