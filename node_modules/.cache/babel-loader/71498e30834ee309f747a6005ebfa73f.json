{"remainingRequest":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue","mtime":1662620227929},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\babel.config.js","mtime":1662103635333},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js","mtime":1662108541364},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js","mtime":1662108544456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL2FiY3d1L0Rlc2t0b3AvXHU1QzBGXHU5RUQxL0xlYXJuL0dpdGVlL3NnZ19ob3V0YWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZXFBZGRPclVwZGF0ZUF0dHIgfSBmcm9tICJAL2FwaS9wcm9kdWN0L2F0dHIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkF0dHIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhdHRyTGlzdDogW10sCiAgICAgIHNob3dUYWJsZTogdHJ1ZSwKICAgICAgYXR0ck5hbWU6ICIiLAogICAgICBpc0NsaWNrOiB0cnVlLAogICAgICBhdHRyVmFsdWVMaXN0OiBbXSwKICAgICAgdmFsdWVMaXN0OiB7CiAgICAgICAgdmFsdWVOYW1lOiAiIiwKICAgICAgICBhdHRySWQ6ICIiLAogICAgICAgIGZsYWc6IGZhbHNlCiAgICAgIH0sCiAgICAgIGNhdGVnb3J5M0lkOiAiIiwKICAgICAgaWQ6ICIiCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluS4iee6p+WIhuexu0lkCiAgICBnZXRDYXRlZ29yeTNJZDogZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkzSWQodmFsdWUpIHsKICAgICAgdGhpcy5jYXRlZ29yeTNJZCA9IHZhbHVlOwogICAgfSwKICAgIC8vIOiHquWumuS5ieS6i+S7tueahOWbnuiwgwogICAgZ2V0QXR0ckxpc3Q6IGZ1bmN0aW9uIGdldEF0dHJMaXN0KHZhbHVlKSB7CiAgICAgIHRoaXMuYXR0ckxpc3QgPSB2YWx1ZTsKICAgIH0sCiAgICAvLyDmt7vliqDlsZ7mgKcKICAgIGFkZEF0dHI6IGZ1bmN0aW9uIGFkZEF0dHIoKSB7CiAgICAgIHRoaXMuc2hvd1RhYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDbGljayA9IGZhbHNlOwogICAgfSwKICAgIC8vIOa3u+WKoOWxnuaAp+WAvAogICAgYWRkQXR0clZhbHVlOiBmdW5jdGlvbiBhZGRBdHRyVmFsdWUoKSB7CiAgICAgIHRoaXMuYXR0clZhbHVlTGlzdC5wdXNoKHRoaXMudmFsdWVMaXN0KTsKICAgICAgY29uc29sZS5sb2codGhpcy5hdHRyVmFsdWVMaXN0KTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHt9LAogICAgdXBkYXRlQXR0cjogZnVuY3Rpb24gdXBkYXRlQXR0cihyb3cpIHsKICAgICAgdGhpcy5zaG93VGFibGUgPSBmYWxzZTsKICAgICAgdGhpcy5hdHRyTmFtZSA9IHJvdy5hdHRyTmFtZTsKICAgICAgdGhpcy5pZCA9IHJvdy5pZDsgLy8gdGhpcy5hdHRyVmFsdWVMaXN0ID0gcm93LmF0dHJWYWx1ZUxpc3Q7CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocm93LmF0dHJWYWx1ZUxpc3QpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIGF0dHJJZCA9IGl0ZW0uYXR0cklkLAogICAgICAgICAgICAgIHZhbHVlTmFtZSA9IGl0ZW0udmFsdWVOYW1lOwogICAgICAgICAgdmFyIHZhbHVlUm93ID0gewogICAgICAgICAgICBhdHRySWQ6IGF0dHJJZCwKICAgICAgICAgICAgdmFsdWVOYW1lOiB2YWx1ZU5hbWUsCiAgICAgICAgICAgIGZsYWc6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmF0dHJWYWx1ZUxpc3QucHVzaCh2YWx1ZVJvdyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHRoaXMudmFsdWVMaXN0LmF0dHJJZCA9IHJvdy5pZDsKICAgIH0sCiAgICAvLyDkv53lrZjmt7vliqDnmoTlsZ7mgKflgLwKICAgIHNhdmVBdHRyVmFsdWU6IGZ1bmN0aW9uIHNhdmVBdHRyVmFsdWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgYmFzZUF0dHJJbmZvID0gewogICAgICAgIGF0dHJOYW1lOiB0aGlzLmF0dHJOYW1lLAogICAgICAgIGF0dHJWYWx1ZUxpc3Q6IHRoaXMuYXR0clZhbHVlTGlzdCwKICAgICAgICBjYXRlZ29yeUlkOiB0aGlzLmNhdGVnb3J5M0lkLAogICAgICAgIGNhdGVnb3J5TGV2ZWw6IDMsCiAgICAgICAgaWQ6IHRoaXMuaWQKICAgICAgfTsKICAgICAgcmVxQWRkT3JVcGRhdGVBdHRyKGJhc2VBdHRySW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXMuYXR0clZhbHVlTGlzdCksCiAgICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgaXRlbS5mbGFnID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5zaG93VGFibGUgPSB0cnVlOwoKICAgICAgICAgIF90aGlzLiRyZWZzLkNhdGVnb3J5U2VsZWN0LmdldEF0dHJMaXN0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;EACAA,YADA;EAEAC,IAFA,kBAEA;IACA;MACAC,YADA;MAEAC,eAFA;MAGAC,YAHA;MAIAC,aAJA;MAKAC,iBALA;MAMAC;QACAC,aADA;QAEAC,UAFA;QAGAC;MAHA,CANA;MAWAC,eAXA;MAYAC;IAZA;EAcA,CAjBA;EAkBAC,OAlBA,qBAkBA,EAlBA;EAmBAC;IACA;IACAC,cAFA,0BAEAC,KAFA,EAEA;MACA;IACA,CAJA;IAKA;IACAC,WANA,uBAMAD,KANA,EAMA;MACA;IACA,CARA;IASA;IACAE,OAVA,qBAUA;MACA;MACA;IACA,CAbA;IAcA;IACAC,YAfA,0BAeA;MACA;MACAC;IACA,CAlBA;IAmBAC,MAnBA,oBAmBA,EAnBA;IAoBAC,UApBA,sBAoBAC,GApBA,EAoBA;MACA;MACA;MACA,iBAHA,CAIA;;MAJA,2CAKAA,iBALA;MAAA;;MAAA;QAKA;UAAA;UACA;UAAA;UACA;YACAd,cADA;YAEAD,oBAFA;YAGAE;UAHA;UAKA;QACA;MAbA;QAAA;MAAA;QAAA;MAAA;;MAcA;IACA,CAnCA;IAoCA;IACAc,aArCA,2BAqCA;MAAA;;MACA;QACApB,uBADA;QAEAE,iCAFA;QAGAmB,4BAHA;QAIAC,gBAJA;QAKAd;MALA;MAOAe;QACA;UAAA,4CACA,mBADA;UAAA;;UAAA;YACA;cAAA;cACAC;YACA;UAHA;YAAA;UAAA;YAAA;UAAA;;UAIA;;UACA;QACA;MACA,CARA;IASA;EAtDA;AAnBA","names":["name","data","attrList","showTable","attrName","isClick","attrValueList","valueList","valueName","attrId","flag","category3Id","id","mounted","methods","getCategory3Id","value","getAttrList","addAttr","addAttrValue","console","cancel","updateAttr","row","saveAttrValue","categoryId","categoryLevel","reqAddOrUpdateAttr","item"],"sourceRoot":"src/views/product/Attr","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"margin: 20px 0px\">\r\n      <CategorySelect\r\n        @getAttrList=\"getAttrList\"\r\n        @getCategory3Id=\"getCategory3Id\"\r\n        :isClick.sync=\"isClick\"\r\n        ref=\"CategorySelect\"\r\n      ></CategorySelect>\r\n    </el-card>\r\n    <el-card>\r\n      <div v-show=\"showTable\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addAttr\" :disabled=\"!(category3Id)\"\r\n          >添加属性</el-button\r\n        >\r\n        <el-table :data=\"attrList\" style=\"width: 100%\" border>\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性名称\" width=\"200px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"attrValueList\"\r\n            label=\"属性值列表\"\r\n            width=\"width\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-tag\r\n                type=\"success\"\r\n                v-for=\"(item, index) in row.attrValueList\"\r\n                :key=\"item.id\"\r\n                style=\"margin: 0 20px\"\r\n                >{{ item.valueName }}</el-tag\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-edit\"\r\n                size=\"mini\"\r\n                @click=\"updateAttr(row)\"\r\n              ></el-button>\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div v-show=\"!showTable\">\r\n        <div style=\"margin: 20px 0\">\r\n          <span>属性名:</span>\r\n          <el-input\r\n            placeholder=\"请输入属性名\"\r\n            v-model=\"attrName\"\r\n            style=\"width: 350px; margin: 0 20px\"\r\n          ></el-input>\r\n        </div>\r\n        <div style=\"margin: 20px 0\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-plus\"\r\n            @click=\"addAttrValue\"\r\n            style=\"margin: 0 20px 0 0\"\r\n            :disabled=\"!attrName\"\r\n            >添加属性值</el-button\r\n          >\r\n          <el-button @click=\"cancel\">取消</el-button>\r\n        </div>\r\n\r\n        <el-table\r\n          :data=\"attrValueList\"\r\n          style=\"width: 100%; margin: 20px 0\"\r\n          border\r\n        >\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性值名称\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <span v-if=\"row.flag\">{{ row.valueName }}</span>\r\n              <el-input\r\n                v-model=\"row.valueName\"\r\n                placeholder=\"请输入属性值名称\"\r\n                v-else\r\n              ></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button type=\"primary\" @click=\"saveAttrValue\">保存</el-button>\r\n        <el-button>取消</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqAddOrUpdateAttr } from \"@/api/product/attr\";\r\nexport default {\r\n  name: \"Attr\",\r\n  data() {\r\n    return {\r\n      attrList: [],\r\n      showTable: true,\r\n      attrName: \"\",\r\n      isClick: true,\r\n      attrValueList: [],\r\n      valueList: {\r\n        valueName: \"\",\r\n        attrId: \"\",\r\n        flag: false,\r\n      },\r\n      category3Id: \"\",\r\n      id: \"\",\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    // 获取三级分类Id\r\n    getCategory3Id(value) {\r\n      this.category3Id = value;\r\n    },\r\n    // 自定义事件的回调\r\n    getAttrList(value) {\r\n      this.attrList = value;\r\n    },\r\n    // 添加属性\r\n    addAttr() {\r\n      this.showTable = false;\r\n      this.isClick = false;\r\n    },\r\n    // 添加属性值\r\n    addAttrValue() {\r\n      this.attrValueList.push(this.valueList);\r\n      console.log(this.attrValueList);\r\n    },\r\n    cancel() {},\r\n    updateAttr(row) {\r\n      this.showTable = false;\r\n      this.attrName = row.attrName;\r\n      this.id = row.id;\r\n      // this.attrValueList = row.attrValueList;\r\n      for (let item of row.attrValueList) {\r\n        let { attrId, valueName } = item;\r\n        let valueRow = {\r\n          attrId,\r\n          valueName,\r\n          flag: true,\r\n        };\r\n        this.attrValueList.push(valueRow);\r\n      }\r\n      this.valueList.attrId = row.id;\r\n    },\r\n    // 保存添加的属性值\r\n    saveAttrValue() {\r\n      let baseAttrInfo = {\r\n        attrName: this.attrName,\r\n        attrValueList: this.attrValueList,\r\n        categoryId: this.category3Id,\r\n        categoryLevel: 3,\r\n        id: this.id,\r\n      };\r\n      reqAddOrUpdateAttr(baseAttrInfo).then((res) => {\r\n        if (res.code === 200) {\r\n          for(let item of this.attrValueList){\r\n            item.flag = undefined;\r\n          }\r\n          this.showTable = true;\r\n          this.$refs.CategorySelect.getAttrList();\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}