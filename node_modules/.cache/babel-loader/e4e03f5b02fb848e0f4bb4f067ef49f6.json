{"remainingRequest":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\store\\modules\\user.js","mtime":1662109111919},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\babel.config.js","mtime":1662103635333},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvYWJjd3UvRGVza3RvcC9cdTVDMEZcdTlFRDEvTGVhcm4vR2l0ZWUvc2dnX2hvdXRhaS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FiY3d1L0Rlc2t0b3AvXHU1QzBGXHU5RUQxL0xlYXJuL0dpdGVlL3NnZ19ob3V0YWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIGxvZ291dCBhcyBfbG9nb3V0LCBnZXRJbmZvIGFzIF9nZXRJbmZvIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgdXNlcm5hbWUsIHBhc3N3b3JkLCByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLCBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfbG9naW4oewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghKHJlc3VsdC5jb2RlID09IDIwMDAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlc3VsdC5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICBzZXRUb2tlbihyZXN1bHQuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgJ29rJyk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXMucmVqZWN0KG5ldyBFcnJvcignZmFpbGUnKSkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmV0dXJuIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","userInfo","commit","username","password","trim","result","code","data","Promis","reject","Error","Promise","resolve","then","response","catch","error","resetToken","namespaced"],"sources":["C:/Users/abcwu/Desktop/小黑/Learn/Gitee/sgg_houtai/src/store/modules/user.js"],"sourcesContent":["import {\r\n  login,\r\n  logout,\r\n  getInfo\r\n} from '@/api/user'\r\nimport {\r\n  getToken,\r\n  setToken,\r\n  removeToken\r\n} from '@/utils/auth'\r\nimport {\r\n  resetRouter\r\n} from '@/router'\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    token: getToken(),\r\n    name: '',\r\n    avatar: ''\r\n  }\r\n}\r\n\r\nconst state = getDefaultState()\r\n\r\nconst mutations = {\r\n  RESET_STATE: (state) => {\r\n    Object.assign(state, getDefaultState())\r\n  },\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_NAME: (state, name) => {\r\n    state.name = name\r\n  },\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // user login\r\n async login({\r\n    commit\r\n  }, userInfo) {\r\n    const {\r\n      username,\r\n      password\r\n    } = userInfo ;\r\n    let result = await login({\r\n      username: username.trim(),\r\n      password: password\r\n    });\r\n    // console.log(result);\r\n    if(result.code == 20000){\r\n        commit('SET_TOKEN', result.data.token);\r\n        setToken(result.data.token);\r\n        return 'ok';\r\n    }else{\r\n      return new Promis.reject(new Error('faile'));\r\n    }\r\n    // return new Promise((resolve, reject) => {\r\n    //   login({ username: username.trim(), password: password }).then(response => {\r\n    //     const { data } = response\r\n    //     commit('SET_TOKEN', data.token)\r\n    //     setToken(data.token)\r\n    //     resolve()\r\n    //   }).catch(error => {\r\n    //     reject(error)\r\n    //   })\r\n    // })\r\n  },\r\n\r\n  // get user info\r\n  getInfo({\r\n    commit,\r\n    state\r\n  }) {\r\n    return new Promise((resolve, reject) => {\r\n      getInfo(state.token).then(response => {\r\n        const {\r\n          data\r\n        } = response\r\n\r\n        if (!data) {\r\n          return reject('Verification failed, please Login again.')\r\n        }\r\n\r\n        const {\r\n          name,\r\n          avatar\r\n        } = data\r\n\r\n        commit('SET_NAME', name)\r\n        commit('SET_AVATAR', avatar)\r\n        resolve(data)\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // user logout\r\n  logout({\r\n    commit,\r\n    state\r\n  }) {\r\n    return new Promise((resolve, reject) => {\r\n      logout(state.token).then(() => {\r\n        removeToken() // must remove  token  first\r\n        resetRouter()\r\n        commit('RESET_STATE')\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // remove token\r\n  resetToken({\r\n    commit\r\n  }) {\r\n    return new Promise(resolve => {\r\n      removeToken() // must remove  token  first\r\n      commit('RESET_STATE')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"],"mappings":"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"}]}