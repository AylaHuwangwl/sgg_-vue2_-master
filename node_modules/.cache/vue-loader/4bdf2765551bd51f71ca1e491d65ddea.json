{"remainingRequest":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\src\\views\\product\\Attr\\index.vue","mtime":1662620227929},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\babel-loader\\lib\\index.js","mtime":1662108541364},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662108539732},{"path":"C:\\Users\\abcwu\\Desktop\\小黑\\Learn\\Gitee\\sgg_houtai\\node_modules\\vue-loader\\lib\\index.js","mtime":1662108544456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZXFBZGRPclVwZGF0ZUF0dHIgfSBmcm9tICJAL2FwaS9wcm9kdWN0L2F0dHIiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQXR0ciIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGF0dHJMaXN0OiBbXSwNCiAgICAgIHNob3dUYWJsZTogdHJ1ZSwNCiAgICAgIGF0dHJOYW1lOiAiIiwNCiAgICAgIGlzQ2xpY2s6IHRydWUsDQogICAgICBhdHRyVmFsdWVMaXN0OiBbXSwNCiAgICAgIHZhbHVlTGlzdDogew0KICAgICAgICB2YWx1ZU5hbWU6ICIiLA0KICAgICAgICBhdHRySWQ6ICIiLA0KICAgICAgICBmbGFnOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBjYXRlZ29yeTNJZDogIiIsDQogICAgICBpZDogIiIsDQogICAgfTsNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5LiJ57qn5YiG57G7SWQNCiAgICBnZXRDYXRlZ29yeTNJZCh2YWx1ZSkgew0KICAgICAgdGhpcy5jYXRlZ29yeTNJZCA9IHZhbHVlOw0KICAgIH0sDQogICAgLy8g6Ieq5a6a5LmJ5LqL5Lu255qE5Zue6LCDDQogICAgZ2V0QXR0ckxpc3QodmFsdWUpIHsNCiAgICAgIHRoaXMuYXR0ckxpc3QgPSB2YWx1ZTsNCiAgICB9LA0KICAgIC8vIOa3u+WKoOWxnuaApw0KICAgIGFkZEF0dHIoKSB7DQogICAgICB0aGlzLnNob3dUYWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5pc0NsaWNrID0gZmFsc2U7DQogICAgfSwNCiAgICAvLyDmt7vliqDlsZ7mgKflgLwNCiAgICBhZGRBdHRyVmFsdWUoKSB7DQogICAgICB0aGlzLmF0dHJWYWx1ZUxpc3QucHVzaCh0aGlzLnZhbHVlTGlzdCk7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmF0dHJWYWx1ZUxpc3QpOw0KICAgIH0sDQogICAgY2FuY2VsKCkge30sDQogICAgdXBkYXRlQXR0cihyb3cpIHsNCiAgICAgIHRoaXMuc2hvd1RhYmxlID0gZmFsc2U7DQogICAgICB0aGlzLmF0dHJOYW1lID0gcm93LmF0dHJOYW1lOw0KICAgICAgdGhpcy5pZCA9IHJvdy5pZDsNCiAgICAgIC8vIHRoaXMuYXR0clZhbHVlTGlzdCA9IHJvdy5hdHRyVmFsdWVMaXN0Ow0KICAgICAgZm9yIChsZXQgaXRlbSBvZiByb3cuYXR0clZhbHVlTGlzdCkgew0KICAgICAgICBsZXQgeyBhdHRySWQsIHZhbHVlTmFtZSB9ID0gaXRlbTsNCiAgICAgICAgbGV0IHZhbHVlUm93ID0gew0KICAgICAgICAgIGF0dHJJZCwNCiAgICAgICAgICB2YWx1ZU5hbWUsDQogICAgICAgICAgZmxhZzogdHJ1ZSwNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5hdHRyVmFsdWVMaXN0LnB1c2godmFsdWVSb3cpOw0KICAgICAgfQ0KICAgICAgdGhpcy52YWx1ZUxpc3QuYXR0cklkID0gcm93LmlkOw0KICAgIH0sDQogICAgLy8g5L+d5a2Y5re75Yqg55qE5bGe5oCn5YC8DQogICAgc2F2ZUF0dHJWYWx1ZSgpIHsNCiAgICAgIGxldCBiYXNlQXR0ckluZm8gPSB7DQogICAgICAgIGF0dHJOYW1lOiB0aGlzLmF0dHJOYW1lLA0KICAgICAgICBhdHRyVmFsdWVMaXN0OiB0aGlzLmF0dHJWYWx1ZUxpc3QsDQogICAgICAgIGNhdGVnb3J5SWQ6IHRoaXMuY2F0ZWdvcnkzSWQsDQogICAgICAgIGNhdGVnb3J5TGV2ZWw6IDMsDQogICAgICAgIGlkOiB0aGlzLmlkLA0KICAgICAgfTsNCiAgICAgIHJlcUFkZE9yVXBkYXRlQXR0cihiYXNlQXR0ckluZm8pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiB0aGlzLmF0dHJWYWx1ZUxpc3Qpew0KICAgICAgICAgICAgaXRlbS5mbGFnID0gdW5kZWZpbmVkOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnNob3dUYWJsZSA9IHRydWU7DQogICAgICAgICAgdGhpcy4kcmVmcy5DYXRlZ29yeVNlbGVjdC5nZXRBdHRyTGlzdCgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/Attr","sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"margin: 20px 0px\">\r\n      <CategorySelect\r\n        @getAttrList=\"getAttrList\"\r\n        @getCategory3Id=\"getCategory3Id\"\r\n        :isClick.sync=\"isClick\"\r\n        ref=\"CategorySelect\"\r\n      ></CategorySelect>\r\n    </el-card>\r\n    <el-card>\r\n      <div v-show=\"showTable\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addAttr\" :disabled=\"!(category3Id)\"\r\n          >添加属性</el-button\r\n        >\r\n        <el-table :data=\"attrList\" style=\"width: 100%\" border>\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性名称\" width=\"200px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"attrValueList\"\r\n            label=\"属性值列表\"\r\n            width=\"width\"\r\n          >\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-tag\r\n                type=\"success\"\r\n                v-for=\"(item, index) in row.attrValueList\"\r\n                :key=\"item.id\"\r\n                style=\"margin: 0 20px\"\r\n                >{{ item.valueName }}</el-tag\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-edit\"\r\n                size=\"mini\"\r\n                @click=\"updateAttr(row)\"\r\n              ></el-button>\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div v-show=\"!showTable\">\r\n        <div style=\"margin: 20px 0\">\r\n          <span>属性名:</span>\r\n          <el-input\r\n            placeholder=\"请输入属性名\"\r\n            v-model=\"attrName\"\r\n            style=\"width: 350px; margin: 0 20px\"\r\n          ></el-input>\r\n        </div>\r\n        <div style=\"margin: 20px 0\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-plus\"\r\n            @click=\"addAttrValue\"\r\n            style=\"margin: 0 20px 0 0\"\r\n            :disabled=\"!attrName\"\r\n            >添加属性值</el-button\r\n          >\r\n          <el-button @click=\"cancel\">取消</el-button>\r\n        </div>\r\n\r\n        <el-table\r\n          :data=\"attrValueList\"\r\n          style=\"width: 100%; margin: 20px 0\"\r\n          border\r\n        >\r\n          <el-table-column type=\"index\" label=\"序号\" width=\"100px\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"attrName\" label=\"属性值名称\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <span v-if=\"row.flag\">{{ row.valueName }}</span>\r\n              <el-input\r\n                v-model=\"row.valueName\"\r\n                placeholder=\"请输入属性值名称\"\r\n                v-else\r\n              ></el-input>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"160px\">\r\n            <template slot-scope=\"{ row, $index }\">\r\n              <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n              ></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button type=\"primary\" @click=\"saveAttrValue\">保存</el-button>\r\n        <el-button>取消</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqAddOrUpdateAttr } from \"@/api/product/attr\";\r\nexport default {\r\n  name: \"Attr\",\r\n  data() {\r\n    return {\r\n      attrList: [],\r\n      showTable: true,\r\n      attrName: \"\",\r\n      isClick: true,\r\n      attrValueList: [],\r\n      valueList: {\r\n        valueName: \"\",\r\n        attrId: \"\",\r\n        flag: false,\r\n      },\r\n      category3Id: \"\",\r\n      id: \"\",\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    // 获取三级分类Id\r\n    getCategory3Id(value) {\r\n      this.category3Id = value;\r\n    },\r\n    // 自定义事件的回调\r\n    getAttrList(value) {\r\n      this.attrList = value;\r\n    },\r\n    // 添加属性\r\n    addAttr() {\r\n      this.showTable = false;\r\n      this.isClick = false;\r\n    },\r\n    // 添加属性值\r\n    addAttrValue() {\r\n      this.attrValueList.push(this.valueList);\r\n      console.log(this.attrValueList);\r\n    },\r\n    cancel() {},\r\n    updateAttr(row) {\r\n      this.showTable = false;\r\n      this.attrName = row.attrName;\r\n      this.id = row.id;\r\n      // this.attrValueList = row.attrValueList;\r\n      for (let item of row.attrValueList) {\r\n        let { attrId, valueName } = item;\r\n        let valueRow = {\r\n          attrId,\r\n          valueName,\r\n          flag: true,\r\n        };\r\n        this.attrValueList.push(valueRow);\r\n      }\r\n      this.valueList.attrId = row.id;\r\n    },\r\n    // 保存添加的属性值\r\n    saveAttrValue() {\r\n      let baseAttrInfo = {\r\n        attrName: this.attrName,\r\n        attrValueList: this.attrValueList,\r\n        categoryId: this.category3Id,\r\n        categoryLevel: 3,\r\n        id: this.id,\r\n      };\r\n      reqAddOrUpdateAttr(baseAttrInfo).then((res) => {\r\n        if (res.code === 200) {\r\n          for(let item of this.attrValueList){\r\n            item.flag = undefined;\r\n          }\r\n          this.showTable = true;\r\n          this.$refs.CategorySelect.getAttrList();\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}